<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>DeviantArt SafeFrames Demo: Update iframe background depending on its position</title>
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" title="no title" charset="utf-8">
        <script type='text/javascript' src='../dist/deviantart-safeframes-host.js'></script>
        <script type='text/javascript'>var d = new DeviantArtSafeFramesHost();</script>
    </head>
    <body>
        <header>
            <a href="http://deviantart.com">
            <span id="deviantart-logo">
                <span class="mark"></span>
                <span class="type"></span>
            </span>
            </a>
            <ul class="menu">
                <li><a href="./background.html" class="selected">background</a></li>
                <li><a href="./visibility.html">visibility</a></li>
                <li><a href="./cookies.html">cookies</a></li>
            </ul>
        </header>
        <div class="pp">
        <p>This demo sets the same image as a background to each of the randomly positioned iframes, which then reposition their background images so that it aligns with other iframes, and appear as a single image.</p>
        </div>
        <div id="stage">
            <script type='text/javascript'>
                var MIN_LEFT = 0;
                var MIN_TOP = document.getElementById('stage').offsetTop;
                var WIN_HEIGHT = window.innerHeight - MIN_TOP;
                var WIN_WIDTH = window.innerWidth;
                var MIN_SIZE = Math.min(200, WIN_WIDTH, WIN_HEIGHT) - 2;
                var MAX_SIZE = Math.min(500, WIN_WIDTH, WIN_HEIGHT) - 2;

                function createIframe(x, y, w, h) {
                    var iframe = document.createElement('iframe');
                    iframe.setAttribute('frameborder', '1');
                    iframe.setAttribute('marginheight', '0');
                    iframe.setAttribute('marginwidth', '0');
                    iframe.setAttribute('scrolling', 'no');
                    iframe.style.position = "absolute";
                    iframe.style.width = w + 'px';
                    iframe.style.height = h + 'px';
                    iframe.style.top = y + 'px';
                    iframe.style.left = x + 'px';
                    iframe.src = 'iframes/bgcutout.html';
                    document.body.appendChild(iframe);
                    return iframe;
                }

                var numFrames = 10;
                while (numFrames-- > 0) {
                    var w = Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE;
                    var h = Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE;
                    var x = Math.random() * Math.max(MIN_LEFT, WIN_WIDTH - w) + MIN_LEFT;
                    var y = Math.random() * Math.max(MIN_TOP, WIN_HEIGHT - h) + MIN_TOP;
                    createIframe(x, y, w, h);
                }
            </script>
        </div>
    </body>
</html>

